{% extends "adminlte/login.html" %}
{% load i18n static %}

{% block logo %}
	<div class="login-logo">
		<a href="{% block logo_href %}/{% endblock %}">{% block logo_text %}<b>{% trans 'Sign Up' %}</b>{% endblock %}</a>
	</div>
{% endblock %}
{% block login_errors %}
	{% if form.errors %}
		<p class="alert alert-danger">
			{% if form.errors.items|length == 1 %}{% trans "Please correct the error below." %}{% else %}
				{% trans "Please correct the errors below." %}{% endif %}
		</p>
		{% for form, errors in form.errors.items %}
			{% for error in errors %}
				<p class="alert alert-danger"> {{ error }}</p>
			{% endfor %}
		{% endfor %}
	{% endif %}
{% endblock login_errors %}

{% block login_form %}
	<form method="post">
		{% csrf_token %}
		<div class="form-group has-feedback">
			<input id="{{ form.name.id_for_label }}" name="{{ form.name.name }}" class="form-control" placeholder="{{ form.name.label }}">
		</div>
	
		<div class="form-group has-feedback">
			<input for="{{ form.email.id_for_label }}" name="{{ form.username.name  }}" class="form-control" placeholder="{{ form.username.label }}">
		</div>

		<div class="form-group has-feedback">
			<input type="email" for="{{ form.email.id_for_label }}" name="{{ form.email.name  }}" class="form-control" placeholder="{{ form.email.label }}">
		</div>

		<div class="form-group has-feedback">
			<input id="{{ form.password1.id_for_label }}" for="{{ form.password1.id_for_label }}" name="{{ form.password1.name }}" class="form-control" placeholder="{{ form.password1.label }}" oninput="checkPassword()">
		</div>

		<div class="form-group has-feedback">
			<input id="{{ form.password2.id_for_label }}" for="{{ form.password2.id_for_label }}" name="{{ form.password2.name }}" class="form-control" placeholder="{{ form.password2.label }}" oninput="checkPassword()">
		</div>

		<div id="errorPassword"></div>

		<button type="submit" class="btn btn-primary btn-block btn-flat">{% trans 'Sign Up' %}</button>
	</form>
	
	<a href="{% url 'accounts:login' %}">{% trans  "Already have an account? Log in here." %}</a>
{% endblock login_form %}
		

{% block javascript %}
	<script>
		function checkPassword() {
			const password = document.getElementById('{{ form.password1.id_for_label }}').value;
			const confirmPasswor = document.getElementById('{{ form.password2.id_for_label }}').value;
			const messageError = document.getElementById('errorPassword');
		
			if (messageError.children.length > 0) {
				messageError.innerHTML = ''; 
			}
			if (password !== confirmPasswor) {
				message = document.createElement( "p")
				message.textContent = "Senhas n√£o conferem!"
				messageError.appendChild(message)
			}
		}
	</script>
{% endblock javascript %}